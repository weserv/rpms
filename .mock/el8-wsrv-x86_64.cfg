include('templates/centos-8.tpl')
include('templates/epel-8.tpl')

config_opts['root'] = 'el8-wsrv-x86_64'
config_opts['target_arch'] = 'x86_64'
config_opts['legal_host_arches'] = ('x86_64',)
config_opts['dnf_common_opts'] = ['--enablerepo=epel-modular']
config_opts['module_enable'] = ['rust-toolset:rhel8', 'nginx:1.20']

config_opts['macros']['%_make_verbose'] = 'V=1 VERBOSE=1' # Compat for newer versions of DNF

config_opts['macros']['%_topdir'] = '/builddir/build'
config_opts['macros']['%_smp_mflags'] = '-j6'
config_opts['macros']['%vendor'] = "Weserv's RPM repository <https://rpms.weserv.nl/>"
config_opts['macros']['%packager'] = 'Kleis Auke Wolthuizen'
config_opts['macros']['%bugurl'] = 'https://github.com/weserv/rpms/issues'
config_opts['macros']['%dist'] = '.el8.wsrv'
config_opts['macros']['%rhel'] = '8'

config_opts['dnf.conf'] += """

[remi]
name=Remi's RPM repository for Enterprise Linux 8 - {{ target_arch }}
mirrorlist=http://cdn.remirepo.net/enterprise/8/remi/{{ target_arch }}/mirror
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=file:///usr/share/distribution-gpg-keys/remi/RPM-GPG-KEY-remi2018
excludepkgs=vips*

[weserv]
name=Weserv's RPM repository for Enterprise Linux 8 - {{ target_arch }}
baseurl=https://rpms.weserv.nl/el/8/{{ target_arch }}/
enabled=1
"""
